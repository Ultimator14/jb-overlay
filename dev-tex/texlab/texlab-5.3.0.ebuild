# Copyright 1999-2022 Gentoo Authors
# Distributed under the terms of the GNU General Public License v2

EAPI=8

# Create CRATES variable with
# cargo metadata | jq -r '.packages[]|"\(.name)-\(.version)"'
CRATES="
adler-1.0.2
ahash-0.7.6
aho-corasick-0.7.20
anes-0.1.6
ansi_term-0.12.1
anyhow-1.0.69
arc-swap-1.6.0
assert_unordered-0.3.5
atty-0.2.14
autocfg-1.1.0
beef-0.5.2
bitflags-1.3.2
block-buffer-0.10.3
bstr-1.1.0
bumpalo-3.12.0
cast-0.3.0
cc-1.0.79
cfg-if-1.0.0
chrono-0.4.23
ciborium-0.2.0
ciborium-io-0.2.0
ciborium-ll-0.2.0
clap-3.2.23
clap-4.1.6
clap_derive-4.1.0
clap_lex-0.2.4
clap_lex-0.3.1
console-0.15.5
countme-3.0.1
cpufeatures-0.2.5
crc32fast-1.3.2
criterion-0.4.0
criterion-plot-0.5.0
crossbeam-0.8.2
crossbeam-channel-0.5.6
crossbeam-deque-0.8.2
crossbeam-epoch-0.9.13
crossbeam-queue-0.3.8
crossbeam-utils-0.8.14
crypto-common-0.1.6
dashmap-5.4.0
digest-0.10.6
dirs-4.0.0
dirs-sys-0.3.7
either-1.8.1
encode_unicode-0.3.6
encoding_rs-0.8.32
encoding_rs_io-0.1.7
env_logger-0.10.0
errno-0.2.8
errno-dragonfly-0.1.2
eyre-0.6.8
fastrand-1.8.0
fern-0.6.1
filetime-0.2.19
flate2-1.0.25
flume-0.10.14
fnv-1.0.7
form_urlencoded-1.1.0
fsevent-sys-4.1.0
futures-core-0.3.25
futures-sink-0.3.25
fuzzy-matcher-0.3.7
generic-array-0.14.6
getrandom-0.2.8
globset-0.4.10
half-1.8.2
hashbrown-0.12.3
hashlink-0.8.1
heck-0.4.0
hermit-abi-0.1.19
hermit-abi-0.2.6
human_name-2.0.1
humantime-2.1.0
idna-0.3.0
indenter-0.3.3
indexmap-1.9.2
inotify-0.9.6
inotify-sys-0.1.5
insta-1.28.0
instant-0.1.12
io-lifetimes-1.0.4
is-terminal-0.4.2
isocountry-0.3.2
itertools-0.10.5
itoa-1.0.5
jod-thread-0.1.2
joinery-2.1.0
js-sys-0.3.60
kqueue-1.0.7
kqueue-sys-1.0.3
lazy_static-1.4.0
libc-0.2.139
linked-hash-map-0.5.6
linux-raw-sys-0.1.4
lock_api-0.4.9
log-0.4.17
logos-0.12.1
logos-derive-0.12.1
lsp-server-0.7.0
lsp-types-0.94.0
memchr-2.5.0
memoffset-0.6.5
memoffset-0.7.1
miniz_oxide-0.6.2
mio-0.8.5
nanorand-0.7.0
notify-5.1.0
num-integer-0.1.45
num-traits-0.2.15
num_cpus-1.15.0
once_cell-1.17.1
oorandom-11.1.3
os_str_bytes-6.4.1
parking_lot-0.12.1
parking_lot_core-0.9.6
percent-encoding-2.2.0
pest-2.5.4
pest_derive-2.5.4
pest_generator-2.5.4
pest_meta-2.5.4
phf-0.11.1
phf_codegen-0.11.1
phf_generator-0.11.1
phf_shared-0.11.1
pin-project-1.0.12
pin-project-internal-1.0.12
plotters-0.3.4
plotters-backend-0.3.4
plotters-svg-0.3.3
proc-macro-error-1.0.4
proc-macro-error-attr-1.0.4
proc-macro2-1.0.50
quote-1.0.23
rand-0.8.5
rand_core-0.6.4
rayon-1.6.1
rayon-core-1.10.2
redox_syscall-0.2.16
redox_users-0.4.3
regex-1.7.1
regex-syntax-0.6.28
remove_dir_all-0.5.3
rowan-0.15.10
rustc-hash-1.1.0
rustix-0.36.7
rustversion-1.0.11
ryu-1.0.12
same-file-1.0.6
scopeguard-1.1.0
serde-1.0.152
serde_derive-1.0.152
serde_json-1.0.93
serde_millis-0.1.1
serde_regex-1.1.0
serde_repr-0.1.10
sha2-0.10.6
similar-2.2.1
siphasher-0.3.10
smallstr-0.3.0
smallvec-1.10.0
smol_str-0.1.24
spin-0.9.4
strsim-0.10.0
strum-0.24.1
strum_macros-0.24.3
syn-1.0.107
tempfile-3.3.0
termcolor-1.2.0
text-size-1.1.0
textwrap-0.16.0
thiserror-1.0.38
thiserror-impl-1.0.38
thread_local-1.1.4
threadpool-1.8.1
tinytemplate-1.2.1
tinyvec-1.6.0
tinyvec_macros-0.1.0
titlecase-2.2.1
typenum-1.16.0
ucd-trie-0.1.5
unicode-bidi-0.3.10
unicode-case-mapping-0.4.0
unicode-ident-1.0.6
unicode-normalization-0.1.22
unicode-segmentation-1.10.0
unidecode-0.3.0
url-2.3.1
version_check-0.9.4
walkdir-2.3.2
wasi-0.11.0+wasi-snapshot-preview1
wasm-bindgen-0.2.83
wasm-bindgen-backend-0.2.83
wasm-bindgen-macro-0.2.83
wasm-bindgen-macro-support-0.2.83
wasm-bindgen-shared-0.2.83
web-sys-0.3.60
winapi-0.3.9
winapi-i686-pc-windows-gnu-0.4.0
winapi-util-0.1.5
winapi-x86_64-pc-windows-gnu-0.4.0
windows-sys-0.42.0
windows_aarch64_gnullvm-0.42.1
windows_aarch64_msvc-0.42.1
windows_i686_gnu-0.42.1
windows_i686_msvc-0.42.1
windows_x86_64_gnu-0.42.1
windows_x86_64_gnullvm-0.42.1
windows_x86_64_msvc-0.42.1
yaml-rust-0.4.5
"

SALSA_COMMIT="20c7834ff34fd00a41b59bec61f3d5c85ea3abd4"

declare -A GIT_CRATES=(
	[salsa-2022]="https://github.com/salsa-rs/salsa;${SALSA_COMMIT};salsa-%commit%/components/salsa-2022"
	[salsa-2022-macros]="https://github.com/salsa-rs/salsa;${SALSA_COMMIT};salsa-%commit%/components/salsa-2022-macros"
)

inherit cargo

DESCRIPTION="An implementation of the Language Server Protocol for LaTeX"
HOMEPAGE="https://github.com/latex-lsp/texlab"
SRC_URI="
	https://github.com/latex-lsp/${PN}/archive/v${PV}.tar.gz
	$(cargo_crate_uris)
"

LICENSE="GPL-3"
SLOT="0"
KEYWORDS="~arm64 ~amd64 ~x86"
RESTRICT="mirror"
IUSE=""

DEPEND=""
RDEPEND="${DEPEND}"
